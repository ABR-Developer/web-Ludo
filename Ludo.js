let GreenPath = [
    ["245px", "46px"],
    ["245px", "86px"],
    ["245px", "126px"],
    ["245px", "166px"],
    ["245px", "206px"],

    ["205px", "246px"],
    ["165px", "246px"],
    ["125px", "246px"],
    ["85px", "246px"],
    ["45px", "246px"],
    ["5px", "246px"],

    ["5px", "286px"],

    ["5px", "326px"],
    ["45px", "326px"],
    ["85px", "326px"],
    ["125px", "326px"],
    ["165px", "326px"],
    ["205px", "326px"],

    ["245px", "366px"],
    ["245px", "406px"],
    ["245px", "446px"],
    ["245px", "486px"],
    ["245px", "526px"],
    ["245px", "566px"],

    ["285px", "566px"],

    ["325px", "566px"],
    ["325px", "526px"],
    ["325px", "486px"],
    ["325px", "446px"],
    ["325px", "406px"],
    ["325px", "366px"],

    ["365px", "326px"],
    ["405px", "326px"],
    ["445px", "326px"],
    ["485px", "326px"],
    ["525px", "326px"],
    ["565px", "326px"],

    ["565px", "286px"],

    ["565px", "246px"],
    ["525px", "246px"],
    ["485px", "246px"],
    ["445px", "246px"],
    ["405px", "246px"],
    ["365px", "246px"],

    ["325px", "206px"],
    ["325px", "166px"],
    ["325px", "126px"],
    ["325px", "86px"],
    ["325px", "46px"],
    ["325px", "6px"],

    ["285px", "6px"],

    ["285px", "46px"],
    ["285px", "86px"],
    ["285px", "126px"],
    ["285px", "166px"],
    ["285px", "206px"],

    ["285px", "246px"],
];

let YellowPath = [
    ["45px", "326px"],
    ["85px", "326px"],
    ["125px", "326px"],
    ["165px", "326px"],
    ["205px", "326px"],

    ["245px", "366px"],
    ["245px", "406px"],
    ["245px", "446px"],
    ["245px", "486px"],
    ["245px", "526px"],
    ["245px", "566px"],

    ["285px", "566px"],

    ["325px", "566px"],
    ["325px", "526px"],
    ["325px", "486px"],
    ["325px", "446px"],
    ["325px", "406px"],
    ["325px", "366px"],

    ["365px", "326px"],
    ["405px", "326px"],
    ["445px", "326px"],
    ["485px", "326px"],
    ["525px", "326px"],
    ["565px", "326px"],

    ["565px", "286px"],

    ["565px", "246px"],
    ["525px", "246px"],
    ["485px", "246px"],
    ["445px", "246px"],
    ["405px", "246px"],
    ["365px", "246px"],

    ["325px", "206px"],
    ["325px", "166px"],
    ["325px", "126px"],
    ["325px", "86px"],
    ["325px", "46px"],
    ["325px", "6px"],

    ["285px", "6px"],

    ["245px", "6px"],
    ["245px", "46px"],
    ["245px", "86px"],
    ["245px", "126px"],
    ["245px", "166px"],
    ["245px", "206px"],

    ["205px", "246px"],
    ["165px", "246px"],
    ["125px", "246px"],
    ["85px", "246px"],
    ["45px", "246px"],
    ["5px", "246px"],

    ["5px", "286px"],

    ["45px", "286px"],
    ["85px", "286px"],
    ["125px", "286px"],
    ["165px", "286px"],
    ["205px", "286px"],
    ["245px", "286px"],

    ["285px", "286px"],
];

let BluePath = [
    ["325px", "526px"],
    ["325px", "486px"],
    ["325px", "446px"],
    ["325px", "406px"],
    ["325px", "366px"],

    ["365px", "326px"],
    ["405px", "326px"],
    ["445px", "326px"],
    ["485px", "326px"],
    ["525px", "326px"],
    ["565px", "326px"],

    ["565px", "286px"],

    ["565px", "246px"],
    ["525px", "246px"],
    ["485px", "246px"],
    ["445px", "246px"],
    ["405px", "246px"],
    ["365px", "246px"],

    ["325px", "206px"],
    ["325px", "166px"],
    ["325px", "126px"],
    ["325px", "86px"],
    ["325px", "46px"],
    ["325px", "6px"],

    ["285px", "6px"],

    ["245px", "6px"],
    ["245px", "46px"],
    ["245px", "86px"],
    ["245px", "126px"],
    ["245px", "166px"],
    ["245px", "206px"],

    ["205px", "246px"],
    ["165px", "246px"],
    ["125px", "246px"],
    ["85px", "246px"],
    ["45px", "246px"],
    ["5px", "246px"],

    ["5px", "286px"],

    ["5px", "326px"],
    ["45px", "326px"],
    ["85px", "326px"],
    ["125px", "326px"],
    ["165px", "326px"],
    ["205px", "326px"],

    ["245px", "366px"],
    ["245px", "406px"],
    ["245px", "446px"],
    ["245px", "486px"],
    ["245px", "526px"],
    ["245px", "566px"],

    ["285px", "566px"],

    ["285px", "526px"],
    ["285px", "486px"],
    ["285px", "446px"],
    ["285px", "406px"],
    ["285px", "366px"],
    ["285px", "326px"],
];
let RedPath = [
    ["525px", "246px"],
    ["485px", "246px"],
    ["445px", "246px"],
    ["405px", "246px"],
    ["365px", "246px"],

    ["325px", "206px"],
    ["325px", "166px"],
    ["325px", "126px"],
    ["325px", "86px"],
    ["325px", "46px"],
    ["325px", "6px"],

    ["285px", "6px"],

    ["245px", "6px"],
    ["245px", "46px"],
    ["245px", "86px"],
    ["245px", "126px"],
    ["245px", "166px"],
    ["245px", "206px"],

    ["205px", "246px"],
    ["165px", "246px"],
    ["125px", "246px"],
    ["85px", "246px"],
    ["45px", "246px"],
    ["5px", "246px"],

    ["5px", "286px"],

    ["5px", "326px"],
    ["45px", "326px"],
    ["85px", "326px"],
    ["125px", "326px"],
    ["165px", "326px"],
    ["205px", "326px"],

    ["245px", "366px"],
    ["245px", "406px"],
    ["245px", "446px"],
    ["245px", "486px"],
    ["245px", "526px"],
    ["245px", "566px"],

    ["285px", "566px"],

    ["325px", "566px"],
    ["325px", "526px"],
    ["325px", "486px"],
    ["325px", "446px"],
    ["325px", "406px"],
    ["325px", "366px"],

    ["365px", "326px"],
    ["405px", "326px"],
    ["445px", "326px"],
    ["485px", "326px"],
    ["525px", "326px"],
    ["565px", "326px"],

    ["565px", "286px"],

    ["525px", "286px"],
    ["485px", "286px"],
    ["445px", "286px"],
    ["405px", "286px"],
    ["365px", "286px"],
    ["325px", "286px"],

];

var notDieStates = new Array(
    [GreenPath[0][0], GreenPath[0][1]], [GreenPath[47][0], GreenPath[47][1]], [YellowPath[0][0], YellowPath[0][1]], [YellowPath[47][0], YellowPath[47][1]], [BluePath[0][0], BluePath[0][1]], [BluePath[47][0], BluePath[47][1]], [RedPath[0][0], RedPath[0][1]], [RedPath[47][0], RedPath[47][1]]
);
var btn = document.getElementById("diceToRoll");
btn.style.borderColor = "Green";

var x = 0;
var turn = 0;
var posT, posL;
var countSix = 0;

var arrayOfDice = [
    [document.getElementById("GreenDice1"),
        document.getElementById("GreenDice1").offsetTop,
        document.getElementById("GreenDice1").offsetLeft
    ],
    [document.getElementById("GreenDice2"),
        document.getElementById("GreenDice2").offsetTop,
        document.getElementById("GreenDice2").offsetLeft
    ],
    [document.getElementById("GreenDice3"),
        document.getElementById("GreenDice3").offsetTop,
        document.getElementById("GreenDice3").offsetLeft
    ],
    [document.getElementById("GreenDice4"),
        document.getElementById("GreenDice4").offsetTop,
        document.getElementById("GreenDice4").offsetLeft
    ],
    [document.getElementById("YellowDice1"),
        document.getElementById("YellowDice1").offsetTop,
        document.getElementById("YellowDice1").offsetLeft
    ],
    [document.getElementById("YellowDice2"),
        document.getElementById("YellowDice2").offsetTop,
        document.getElementById("YellowDice2").offsetLeft
    ],
    [document.getElementById("YellowDice3"),
        document.getElementById("YellowDice3").offsetTop,
        document.getElementById("YellowDice3").offsetLeft
    ],
    [document.getElementById("YellowDice4"),
        document.getElementById("YellowDice4").offsetTop,
        document.getElementById("YellowDice4").offsetLeft
    ],
    [document.getElementById("BlueDice1"),
        document.getElementById("BlueDice1").offsetTop,
        document.getElementById("BlueDice1").offsetLeft
    ],
    [document.getElementById("BlueDice2"),
        document.getElementById("BlueDice2").offsetTop,
        document.getElementById("BlueDice2").offsetLeft
    ],
    [document.getElementById("BlueDice3"),
        document.getElementById("BlueDice3").offsetTop,
        document.getElementById("BlueDice3").offsetLeft
    ],
    [document.getElementById("BlueDice4"),
        document.getElementById("BlueDice4").offsetTop,
        document.getElementById("BlueDice4").offsetLeft
    ],
    [document.getElementById("RedDice1"),
        document.getElementById("RedDice1").offsetTop,
        document.getElementById("RedDice1").offsetLeft
    ],
    [document.getElementById("RedDice2"),
        document.getElementById("RedDice2").offsetTop,
        document.getElementById("RedDice2").offsetLeft
    ],
    [document.getElementById("RedDice3"),
        document.getElementById("RedDice3").offsetTop,
        document.getElementById("RedDice3").offsetLeft
    ],
    [document.getElementById("RedDice4"),
        document.getElementById("RedDice4").offsetTop,
        document.getElementById("RedDice4").offsetLeft
    ],
];

function rollDice(event) {
    x = Math.floor(Math.random() * 6 + 1);
    if (countSix < 2) {
        x = Math.floor(Math.random() * 6 + 1);
    } else {
        x = Math.floor(Math.random() * 5 + 1);
    }
    if (x == 1) { btn.style.backgroundImage = "url('1.png')"; } else if (x == 2) { btn.style.backgroundImage = "url('2.png')"; } else if (x == 3) { btn.style.backgroundImage = "url('3.png')"; } else if (x == 4) { btn.style.backgroundImage = "url('4.png')"; } else if (x == 5) { btn.style.backgroundImage = "url('5.png')"; } else if (x == 6) { btn.style.backgroundImage = "url('6.png')"; }

    for (var i = 0; i < 16; i++) {
        arrayOfDice[i][0].style.zIndex = "0";
    }

    if (turn == 0) {
        btn.style.borderColor = "Green";
        disableORNot(turn, GreenPath);
    } else if (turn == 1) {
        btn.style.borderColor = "Yellow";
        disableORNot(turn, YellowPath);
    } else if (turn == 2) {
        btn.style.borderColor = "Blue";
        disableORNot(turn, BluePath);
    } else if (turn == 3) {
        btn.style.borderColor = "Red";
        disableORNot(turn, RedPath);
    }



    function disableORNot(tun, arr) {
        var noOfDisabled = 0;
        for (var a = 0; a < 4; a++) {
            if (x == 6 && arrayOfDice[tun * 4 + a][0].offsetTop == arrayOfDice[tun * 4 + a][1] && arrayOfDice[tun * 4 + a][0].offsetLeft == arrayOfDice[tun * 4 + a][2]) {
                arrayOfDice[tun * 4 + a][0].disabled = false;
                arrayOfDice[tun * 4 + a][0].style.zIndex = "1";
                btn.disabled = true;
                noOfDisabled++;
            } else {
                posT = arrayOfDice[tun * 4 + a][0].offsetTop + "px";
                posL = arrayOfDice[tun * 4 + a][0].offsetLeft + "px";
                for (let y = 0; y < arr.length; y++) {
                    if (posT == arr[y][0] && posL == arr[y][1]) {
                        if (y < arr.length - x) {
                            arrayOfDice[tun * 4 + a][0].disabled = false;
                            arrayOfDice[tun * 4 + a][0].style.zIndex = "1";
                            btn.disabled = true;
                            noOfDisabled++;
                            break;
                        }
                    }
                }
            }
        }
        if (noOfDisabled == 0) {
            turn = (++turn) % 4;
            setTimeout(() => {
                btn.style.backgroundImage = "url('DiceGif.gif')";
                if (turn == 0) {
                    btn.style.borderColor = "Green";
                } else if (turn == 1) {
                    btn.style.borderColor = "Yellow";
                } else if (turn == 2) {
                    btn.style.borderColor = "Blue";
                } else if (turn == 3) {
                    btn.style.borderColor = "Red";
                }
            }, 2000);
        }
    }
}


function movePieces(event) {
    const Ob = document.getElementById(event.target.id);
    console.log(Ob.id);
    for (let index = 0; index < arrayOfDice.length; index++) {
        if (arrayOfDice[index][0].className != Ob.className) {
            if (arrayOfDice[index][0] != Ob) {
                if (Ob.offsetTop == arrayOfDice[index][0].offsetTop && Ob.offsetLeft == arrayOfDice[index][0].offsetLeft) {
                    var on = 0;
                    posT = Ob.offsetTop + "px";
                    posL = Ob.offsetLeft + "px";
                    for (var of = 0; of < notDieStates.length; of++) {
                        if (posT == notDieStates[of][0] && posL == notDieStates[of][1]) {
                            on++;
                        }
                    }
                    if (on == 0) {
                        var classElementObCount = 0;
                        var classElementOtherCount = 0;
                        for (var i = 0; i < 16; i++) {
                            var postTT = arrayOfDice[i][0].offsetTop + "px";
                            var postLL = arrayOfDice[i][0].offsetLeft + "px";
                            if (arrayOfDice[i][0].className == Ob.className && postTT == posT && postLL == posL) {
                                classElementObCount++;
                            }
                            if (arrayOfDice[i][0].className == arrayOfDice[index][0].className && postTT == posT && postLL == posL) {
                                classElementOtherCount++;
                            }
                        }
                        console.log(classElementObCount, ":", classElementOtherCount);
                        if (classElementObCount == classElementOtherCount + 1) {
                            for (var i = 0; i < 16; i++) {
                                var postTT = arrayOfDice[i][0].offsetTop + "px";
                                var postLL = arrayOfDice[i][0].offsetLeft + "px";
                                if (arrayOfDice[i][0].className == Ob.className && postTT == posT && postLL == posL) {
                                    if (arrayOfDice[i][0] != Ob) {
                                        arrayOfDice[i][0].style.top = arrayOfDice[i][1] + "px";
                                        arrayOfDice[i][0].style.left = arrayOfDice[i][2] + "px";
                                        arrayOfDice[i][0].style.height = "35px";
                                        arrayOfDice[i][0].style.width = "35px";
                                    }
                                }
                            }
                        }
                    }
                    break;
                }
            }
        }


    }


    var count = 0;
    posT = Ob.offsetTop + "px";
    posL = Ob.offsetLeft + "px";
    if (Ob.className == "GreenDice") {
        moveOrNot(x, GreenPath);
    } else if (Ob.className == "YellowDice") {
        moveOrNot(x, YellowPath);
    } else if (Ob.className == "BlueDice") {
        moveOrNot(x, BluePath);
    } else if (Ob.className == "RedDice") {
        moveOrNot(x, RedPath);
    }

    function moveOrNot(x, arr) {
        if (x != 6) {
            count++;
        }
        for (let y = 0; y < arr.length; y++) {
            if (posT == arr[y][0] && posL == arr[y][1]) {
                if (y < arr.length - x) {
                    Ob.style.top = arr[y + x][0];
                    Ob.style.left = arr[y + x][1];
                }
                count++;
                break;
            }
        }
        if (count == 0) {
            Ob.style.height = "30px";
            Ob.style.width = "30px";
            Ob.style.top = arr[0][0];
            Ob.style.left = arr[0][1];
        }
        for (let index = 0; index < arrayOfDice.length; index++) {
            if (Ob.offsetTop == arrayOfDice[index][0].offsetTop && Ob.offsetLeft == arrayOfDice[index][0].offsetLeft) {
                posT = Ob.offsetTop + "px";
                posL = Ob.offsetLeft + "px";
                if (arrayOfDice[index][0] != Ob) {
                    if (arrayOfDice[index][0].className != Ob.className) {
                        var on = 0;
                        for (var of = 0; of < notDieStates.length; of++) {
                            if (posT == notDieStates[of][0] && posL == notDieStates[of][1]) {
                                on++;
                            }
                        }
                        if (on == 0) {
                            var classElementObCount = 0;
                            var classElementOtherCount = 0;
                            for (var i = 0; i < 16; i++) {
                                var postTT = arrayOfDice[i][0].offsetTop + "px";
                                var postLL = arrayOfDice[i][0].offsetLeft + "px";
                                console.log(arrayOfDice[i][0].className, ":", Ob.className, ":", postTT, ":", posT, ":", postLL, ":", posL);
                                if (arrayOfDice[i][0].className == Ob.className && postTT == posT && postLL == posL) {
                                    classElementObCount++;
                                } else if (arrayOfDice[i][0].className == arrayOfDice[index][0].className && postTT == posT && postLL == posL) {
                                    classElementOtherCount++;
                                }
                            }
                            if (classElementObCount == classElementOtherCount) {
                                for (var i = 0; i < 16; i++) {
                                    var postTT = arrayOfDice[i][0].offsetTop + "px";
                                    var postLL = arrayOfDice[i][0].offsetLeft + "px";
                                    if (arrayOfDice[i][0].className == arrayOfDice[index][0].className && postTT == posT && postLL == posL) {
                                        arrayOfDice[i][0].style.top = arrayOfDice[i][1] + "px";
                                        arrayOfDice[i][0].style.left = arrayOfDice[i][2] + "px";
                                        arrayOfDice[i][0].style.height = "35px";
                                        arrayOfDice[i][0].style.width = "35px";
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }

        arrayOfDice[turn * 4 + 0][0].disabled = true;
        arrayOfDice[turn * 4 + 1][0].disabled = true;
        arrayOfDice[turn * 4 + 2][0].disabled = true;
        arrayOfDice[turn * 4 + 3][0].disabled = true;
        if (x == 6) {
            countSix++;
        } else {
            countSix = 0;
            turn = (++turn) % 4;
        }
        btn.disabled = false;
        btn.style.backgroundImage = "url('DiceGif.gif')";
        if (turn == 0) {
            btn.style.borderColor = "Green";
        } else if (turn == 1) {
            btn.style.borderColor = "Yellow";
        } else if (turn == 2) {
            btn.style.borderColor = "Blue";
        } else if (turn == 3) {
            btn.style.borderColor = "Red";
        }
    }
    arrayOfDice[turn * 4 + 0][0].disabled = true;
    arrayOfDice[turn * 4 + 1][0].disabled = true;
    arrayOfDice[turn * 4 + 2][0].disabled = true;
    arrayOfDice[turn * 4 + 3][0].disabled = true;

    var lose = 0,
        LoseType = 0;
    check(0, GreenPath);
    check(1, YellowPath);
    check(2, BluePath);
    check(3, RedPath);

    function check(i, arr) {
        if (
            arrayOfDice[i * 4 + 0][0].offsetTop == arr[56][0] && arrayOfDice[i * 4 + 0][0].offsetLeft == arr[56][1] &&
            arrayOfDice[i * 4 + 1][0].offsetTop == arr[56][0] && arrayOfDice[i * 4 + 1][0].offsetLeft == arr[56][1] &&
            arrayOfDice[i * 4 + 2][0].offsetTop == arr[56][0] && arrayOfDice[i * 4 + 2][0].offsetLeft == arr[56][1] &&
            arrayOfDice[i * 4 + 3][0].offsetTop == arr[56][0] && arrayOfDice[i * 4 + 3][0].offsetLeft == arr[56][1]
        ) {
            lose += 4;
        }
    }
    if (lose == 12) {
        check1(0, GreenPath);
        check1(1, YellowPath);
        check1(2, BluePath);
        check1(3, RedPath);

        function check1(i, arr) {
            if (
                arrayOfDice[i * 4 + 0][0].offsetTop == arr[56][0] && arrayOfDice[i * 4 + 0][0].offsetLeft == arr[56][1] &&
                arrayOfDice[i * 4 + 1][0].offsetTop == arr[56][0] && arrayOfDice[i * 4 + 1][0].offsetLeft == arr[56][1] &&
                arrayOfDice[i * 4 + 2][0].offsetTop == arr[56][0] && arrayOfDice[i * 4 + 2][0].offsetLeft == arr[56][1] &&
                arrayOfDice[i * 4 + 3][0].offsetTop == arr[56][0] && arrayOfDice[i * 4 + 3][0].offsetLeft == arr[56][1]
            ) {} else {
                if (i == 0) {
                    alert("PLayer Green Lost");
                } else if (i == 1) {
                    alert("PLayer Yellow Lost");
                } else if (i == 2) {
                    alert("PLayer Blue Lost");
                } else if (i == 3) {
                    alert("PLayer Red Lost");
                }
            }
        }
        location.reload();
    }
}